"use strict";document.documentElement.classList.add(isMobile.any?"mobile":"no-mobile");jQuery(document).ready(function($){$("a[href^=\"#\"]").on("click",function(e){e.preventDefault();var a=$(this),hash=a.attr("href"),target=$("[id=\""+hash.substr(1)+"\"]");if(target.length!=0){$("html:not(:animated), body:not(:animated)").animate({scrollTop:target.offset().top},500,function(){window.location.hash=hash})}});AOS.init({duration:1200,once:true});if($(".topnav__menu").length){$(function(){var $el,leftPos,newWidth,$mainNav=$(".topnav__menu#magic");$mainNav.append("<div id='magic-line'></div>");var $magicLine=$("#magic-line");$magicLine.width($(".topnav__menu#magic .topnav__menu-item.active").width()).css("left",$(".topnav__menu#magic .topnav__menu-item.active").position().left).data("origLeft",$magicLine.position().left).data("origWidth",$magicLine.width());$(".topnav__menu#magic .topnav__menu-item a").focusin(function(){$el=$(this);leftPos=$el.parent().position().left;newWidth=$el.parent().width();$magicLine.stop().animate({left:leftPos,width:newWidth})});$(".topnav__menu#magic .topnav__menu-item a").focusout(function(){$magicLine.stop().animate({left:$magicLine.data("origLeft"),width:$magicLine.data("origWidth")})})});$(function(){var pull=$("#pull"),menu=$(".topnav__menu.-mobile"),menuHeight=menu.height(),close=$(".topnav__menu-close img");$(pull).on("click",function(e){e.preventDefault();menu.animate({left:"0px"},600,"easeOutCubic");setTimeout(function(){menu.addClass("active")},500)});$(close).on("click",function(e){e.preventDefault();menu.animate({left:"-100%"},600,"easeOutCubic");setTimeout(function(){menu.removeClass("active")},500)})})}$(function(){var line=[$(".greyline"),$(".blueline"),$(".orangecircle"),$(".orangeline"),$(".greycircle"),$(".bluecircle")];line.forEach(function(element,index){checkForChanges();function checkForChanges(){if(element.hasClass("aos-animate"))setTimeout(function(){element.stop().addClass("active")},500);else setTimeout(checkForChanges,100)}})});var slider=$(".working__tabs-content-item.active .working__tabs-slider");new Swiper(slider,{direction:"horizontal",loop:true,centeredSlides:true,loopedSlides:2,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});$(".working__tabs-titles").on("click",".working__tabs-titles-item:not(.active)",function(){$(this).addClass("active").siblings().removeClass("active").closest(".working__tabs").find(".working__tabs-content-item").removeClass("active").eq($(this).index()).addClass("active");new Swiper($(this).closest(".working__tabs").find(".working__tabs-content-item").eq($(this).index()).find(".working__tabs-slider"),{direction:"horizontal",loop:true,centeredSlides:true,loopedSlides:2,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})});$(function(){$("input, textarea").each(function(){if($(this).val().length>0)$(this).parent(".input").find(".input__placeholder").addClass("active");else $(this).parent(".input").find(".input__placeholder").removeClass("active");$(this).on("click",function(e){if($(this).val().length>0)$(this).parent(".input").removeClass(" -error").find(".input__placeholder").addClass("active");else $(this).parent(".input").find(".input__placeholder").removeClass("active")});$(".input__placeholder").on("click",function(e){$(this).parent(".input").find("input, textarea").focus().parent(".input").removeClass(" -error")});$(this).focusout(function(e){if($(this).val().length>0&&$(this).val()!=="+7 (___) ___ __ __"){$(this).parent(".input").find(".input__placeholder").addClass("active").parent(".input").removeClass(" -error");if($(this).parents(".form__field").hasClass("-step2")){$(this).parent(".input").find(".input__placeholder").css("opacity","0")}}else $(this).parent(".input").find(".input__placeholder").removeClass("active")});$(this).focusin(function(e){$(this).parent(".input").removeClass(" -error")})})});$(function(){$(".about__people-list-item-assistents").each(function(){var assists=$(this).find(".about__people-list-item-assistents-item");if(assists.length>1){assists.addClass("-hidden").first().removeClass("-hidden").addClass("-active");assists.on("click",function(e){assists.removeClass("-active").addClass("-hidden");$(this).removeClass("-hidden").addClass("-active")})}})});if(document.getElementById("disqus_thread")){$(".disqus-comment-count").attr("data-disqus-url",window.location.href);var disqus_config=function disqus_config(){this.page.url=window.location.href;this.page.identifier="identifier_1"};var your_sub_domain="ivnz";var dsq=document.createElement("script");dsq.type="text/javascript";dsq.async=true;dsq.src="//"+your_sub_domain+".disqus.com/embed.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(dsq);DISQUSWIDGETS.getCount({reset:true})}new Swiper($(".vacancy__talants-slider"),{direction:"horizontal",loop:true,centeredSlides:true,loopedSlides:2,navigation:false});$(".toggle").each(function(){var target="";if($(this).attr("data-target")){target=$(this).attr("data-target")}else target=$(this).next();if($(this).hasClass("-active")){$(target).addClass("-active")}else{$(target).removeClass("-active")}$(this).on("click",function(e){if($(this).hasClass("-active")){$(this).removeClass("-active");$(target).removeClass("-active")}else{$(this).addClass("-active");$(target).addClass("-active")}})});$(".contacts").each(function(){ymaps.ready(init);var myMap;function init(){myMap=new ymaps.Map("map",{center:[59.866933,30.471834],zoom:14,controls:["zoomControl"]});MyBalloonShadowLayout=ymaps.templateLayoutFactory.createClass("<div class=\"contacts__map-fullshadow\">"+"</div>");MyBalloonLayout=ymaps.templateLayoutFactory.createClass("<div class=\"contacts__map-baloon\">"+"<a class=\"close\" href=\"#\"><img src=\"img/close_baloon.svg\" alt=\"close\"></a>"+"<div class=\"contacts__map-baloon-content\">"+"$[[options.contentLayout observeSize]]"+"</div>"+"</div>",{build:function build(){this.constructor.superclass.build.call(this);this._$element=$(".contacts__map-baloon",this.getParentElement());this.applyElementOffset();this._$element.find(".close").on("click",$.proxy(this.onCloseClick,this))},clear:function clear(){this._$element.find(".close").off("click");this.constructor.superclass.clear.call(this)},onSublayoutSizeChange:function onSublayoutSizeChange(){MyBalloonLayout.superclass.onSublayoutSizeChange.apply(this,arguments);if(!this._isElement(this._$element)){return}this.applyElementOffset();this.events.fire("shapechange")},applyElementOffset:function applyElementOffset(){this._$element.css({left:-(this._$element[0].offsetWidth/2),top:-(this._$element[0].offsetHeight+20)})},onCloseClick:function onCloseClick(e){e.preventDefault();this.events.fire("userclose")},getShape:function getShape(){if(!this._isElement(this._$element)){return MyBalloonLayout.superclass.getShape.call(this)}var position=this._$element.position();return new ymaps.shape.Rectangle(new ymaps.geometry.pixel.Rectangle([[position.left,position.top],[position.left+this._$element[0].offsetWidth,position.top+this._$element[0].offsetHeight+20]]))},_isElement:function _isElement(element){return element&&element[0]}}),MyBalloonContentLayout=ymaps.templateLayoutFactory.createClass("$[properties.balloonHeader]"+"<p>$[properties.balloonContent]</p>"),myPlacemark=new ymaps.Placemark([59.866933,30.471834],{hintContent:"\u0418\u0432\u0430\u0449\u0435\u043D\u043A\u043E \u0438 \u041D\u0438\u0437\u0430\u043C\u043E\u0432",balloonHeader:"<div class=\"metro\">\u041F\u0440\u043E\u043B\u0435\u0442\u0430\u0440\u0441\u043A\u0430\u044F</div><b>\u0433. \u0421\u0430\u043D\u043A\u0442-\u041F\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433</b>",balloonContent:"\u043F\u0440. \u041E\u0431\u0443\u0445\u043E\u0432\u0441\u043A\u043E\u0439 \u041E\u0431\u043E\u0440\u043E\u043D\u044B 112 \u043A.2 <br/>\u0411\u0426 \xAB\u0412\u0430\u043D\u0442\xBB, \u043E\u0444\u0438\u0441 713"},{iconLayout:"default#image",iconImageHref:"img/map-mark.svg",iconImageSize:[34,34],iconImageOffset:[-17,-17],hideIconOnBalloonOpen:false,balloonShadow:true,balloonShadowLayout:MyBalloonShadowLayout,balloonLayout:MyBalloonLayout,balloonContentLayout:MyBalloonContentLayout,balloonPanelMaxMapArea:0,balloonShadowOffset:[0,0]});myMap.geoObjects.add(myPlacemark);myPlacemark.balloon.open();myMap.behaviors.disable("scrollZoom")}});$(".blog__paginator-page").each(function(){var self=$(this);$(window).resize(function(){removePages()});function removePages(){if($(window).width()<768){self.hide();if(self.hasClass("-active")){self.show();self.prev().show();self.next().show();if(self.prev().prev().hasClass("blog__paginator-page-more")==false)$("<span class='blog__paginator-page-more'> ... </span>").insertBefore(self.prev())}if(self.prev().hasClass("-active"))self.show()}else{self.show();if(self.hasClass("-active")){if(self.prev().prev().hasClass("blog__paginator-page-more"))self.prev().prev().remove()}}}removePages()});if(!window.phone_mask){phone_mask="+7 (###) ### ## ##"}function maskRefresh(){$("input[name=\"phone\"]").on("focusin",function(){delete $.mask.definitions["9"];$.mask.definitions["#"]="[0-9]";$(this).mask(phone_mask)})}maskRefresh();$(function(){$(".vacancy-form__form form").on("submit",function(e){e.preventDefault();var src=$(this).attr("action");var serialize=$(this).serialize();var data_field=$(this).serializeArray();var form=$(this);var type=$(this).data("type");var fields={name:"",resume:"",phone:"",comments:""};var require=["name","phone","resume"];var errors=[];var message="\u041F\u043E\u043B\u0435 \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C \u0434\u043B\u044F \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F";for(var field in fields){var val=$(form).find("[name='"+field+"']").val();fields[field]=$.trim(val);if(fields[field]==""&&require.indexOf(field)!=-1){errors.push(message);$(form).find("[name='"+field+"']").parent(".input").addClass("-error").find(".input__error").html(message)}}if(!$(form).find("[name='conditions']").is(":checked")){errors.push(message);$(form).find("[name='conditions']").parents(".control-label").addClass("-error").find(".input__error").html("\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0443\u0441\u043B\u043E\u0432\u0438\u044F")}else $(form).find("[name='conditions']").parents(".control-label").removeClass("-error");if(!errors.length){$.ajax({type:"post",async:false,dataType:"json",cache:false,url:src,data:data_field}).done(function(data){$(form).parents(".vacancy-form__wrap").fadeOut("slow",function(){$(form).parents(".vacancy-form").find(".form__success").fadeIn()})})}});$(".blog__subscribe-form form").on("submit",function(e){e.preventDefault();var src=$(this).attr("action");var serialize=$(this).serialize();var data_field=$(this).serializeArray();var form=$(this);var type=$(this).data("type");var fields={email:""};var require=["name","phone","resume"];var errors=[];var message="\u041F\u043E\u043B\u0435 \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C \u0434\u043B\u044F \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F";var expr=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;for(var field in fields){var val=$(form).find("[name='"+field+"']").val();fields[field]=$.trim(val);if(fields[field]==""&&require.indexOf(field)!=-1){errors.push(message);$(form).find("[name='"+field+"']").parent(".input").addClass("-error").find(".input__error").html(message)}else{if(field=="email"){if(!expr.test(fields[field])){errors.push(message);$(form).find("[name='"+field+"']").parent(".input").addClass("-error").find(".input__error").html("\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 e-mail")}}}}if(!errors.length){$.ajax({type:"post",async:false,dataType:"json",cache:false,url:src,data:data_field}).done(function(data){$(form).parents(".blog__subscribe-form").fadeOut("slow",function(){$(form).parents(".blog__subscribe").find(".blog__subscribe-success").fadeIn()})})}})});$(".input__add").on("click",function(){var button=$(this);var input=$(this).parents(".input").find("input[name=\"regions\"]");var regions_container=$(this).parents(".form__field").find(".form__regions");var regions=$(this).parents(".form__field").find(".form__regions-item");var input_value=input.val().trim();console.log(input_value);if(input_value.length!=0){var repeat=0;regions.each(function(){if($(this).text().trim().toLowerCase()==input_value.toLowerCase()){repeat++}});if(repeat==0){regions_container.append("<div class=\"form__regions-item\">"+input_value+"<div class=\"close\"></div>"+"</div>");removeBtn();input.val("").parent(".input").find(".input__placeholder").removeClass("active").css("opacity","1")}}else{if(regions.length==0){regions_container.append("<div class=\"form__regions-item\">"+"\u041C\u043E\u0441\u043A\u0432\u0430"+"<div class=\"close\"></div>"+"</div>");removeBtn();input.val("").parent(".input").find(".input__placeholder").removeClass("active").css("opacity","1")}}});function removeBtn(){$(".close").bind("click",function(){$(this).parents(".form__regions-item").remove()})}removeBtn();$(".audit-form__form form").on("submit",function(e){e.preventDefault()});$(".audit-form__form form .form__button").on("click",function(e){e.preventDefault();var button=$(this);var step1=$(this).parents(".form__field").hasClass("-step1");var step2=$(this).parents(".form__field").hasClass("-step2");var form=$(this).parents("form");var src=form.attr("action");var type=form.data("type");var data={domain:$("[name=domain]").val(),name:$("[name=name]").val(),phone:$("[name=phone]").val(),email:$("[name=email]").val(),promocode:$("[name=promocode]").val(),conditions:$("[name=conditions]:checked").length,theme:$("[name=theme]").val(),regions:[]};var require=["domain","name","phone","email"];var errors=[];var message="\u041F\u043E\u043B\u0435 \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C \u0434\u043B\u044F \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F";var expr=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;for(var field in data){var val=$(form).find("[name='"+field+"']").val();if(require.indexOf(field)!=-1){data[field]=$.trim(val);if(data[field]==""){errors.push(message);$(form).find("[name='"+field+"']").parent(".input").addClass("-error").find(".input__error").html(message)}else{if(field=="email"){if(!expr.test(data[field])){errors.push(message);$(form).find("[name='"+field+"']").parent(".input").addClass("-error").find(".input__error").html("\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 e-mail")}}}}}if(!$(form).find("[name='conditions']").is(":checked")){errors.push(message);$(form).find("[name='conditions']").parents(".control-label").addClass("-error").find(".input__error").html("\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0443\u0441\u043B\u043E\u0432\u0438\u044F")}else $(form).find("[name='conditions']").parents(".control-label").removeClass("-error");$(".form__regions-item").each(function(){var value=$(this).text().trim();data.regions.push(value)});if(data.regions.length==0){errors.push(message);$(form).find("[name='regions']").parents(".input").addClass("-error").find(".input__error").html("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0445\u043E\u0442\u044F \u0431\u044B \u043E\u0434\u0438\u043D \u0440\u0435\u0433\u0438\u043E\u043D")}console.log("step1:",step1,"; step2:",step2,errors,data);if(step1&&!errors.length){button.parents(".form__container").find(".-step1").fadeOut("slow",function(){button.parents(".form__container").find(".-step2").fadeIn()})}else{if(step2&&!errors.length){$.ajax({type:"post",async:false,dataType:"json",cache:false,url:src,data:data}).done(function(data){$(form).parents(".audit-form__wrap").fadeOut("slow",function(){$(form).parents(".audit-form").find(".form__success").fadeIn()})})}}})});